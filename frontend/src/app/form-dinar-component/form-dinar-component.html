<header class="fixed top-0 left-0 right-0 z-50 bg-header opacity-100 backdrop-blur-sm border-b border-brand">
    <div class="absolute inset-0 gradient-header opacity-90"></div>
    <nav class="relative z-10 px-6 py-4">
        <div class="flex items-center justify-between max-w-7xl mx-auto">
            <div class="flex items-center space-x-3">
                <div class="w-12 h-12 flex-center bg-brand rounded-lg">
                    <img src="assets/icons/mask.png" alt="M√°scara" class="w-full h-full p-2 filter-invert">
                </div>
                <h1 class="text-2xl font-bold metal-text text-brand">Mollerussa Metal Fest</h1>
            </div>

            <div class="hidden md:flex items-center space-x-8">
                <button (click)="volverAInicio()"
                    class="flex items-center text-secondary hover-text-brand transition-colors font-medium">
                    <i class="ri-arrow-left-line mr-2"></i>
                    Volver al inicio
                </button>
            </div>

            <button (click)="volverAInicio()" class="md:hidden w-8 h-8 flex-center text-primary">
                <i class="ri-arrow-left-line mr-2"></i>
            </button>
        </div>
    </nav>
</header>

<section class="min-h-screen bg-page py-12">
    <div class="max-w-4xl mx-auto px-6">
        <!-- Bot√≥n volver -->
        <div class="mb-8">
            <button (click)="volverAInicio()"
                class="flex items-center text-brand hover-text-brand font-medium transition-colors">
                <i class="ri-arrow-left-line mr-2"></i>
                Volver al inicio
            </button>
        </div>

        <!-- Header -->
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-black metal-text text-brand mb-4">üçΩÔ∏è COMIDA SOLIDARIA MMF</h1>
            <p class="text-xl text-muted max-w-2xl mx-auto">
                Los campos marcados con * son obligatorios
            </p>
        </div>

        <!-- Descripci√≥n del evento -->
        <div class="bg-card border-2 border-brand rounded-lg p-8 mb-8 glow-effect">
            <h2 class="text-2xl font-bold text-brand mb-4">üé∏ Sobre el Evento</h2>
            <div class="space-y-4 text-secondary">
                <p>
                    Te invitamos a nuestra <strong>Comida Solidaria Mollerussa Metal Fest</strong>, un evento √∫nico que
                    combina
                    buena m√∫sica metal con gastronom√≠a solidaria.
                </p>
                <p>
                    Esta comida especial est√° organizada por la asociaci√≥n Mollerussa Metal Fest como parte de nuestro
                    compromiso con la comunidad y la cultura metalera. Ser√° una experiencia gastron√≥mica acompa√±ada de
                    las mejores bandas de metal de la zona, creando un ambiente √∫nico donde la buena comida y la m√∫sica
                    se fusionan.
                </p>
                <p>
                    <strong>üìç Lugar:</strong> Por determinar<br>
                    <strong>üìÖ Fecha:</strong> Por determinar<br>
                    <strong>üéµ Actuaciones:</strong> Grupos de metal locales en directo
                </p>
                <p class="text-brand font-semibold">
                    ¬°No te pierdas esta experiencia √∫nica de comida y metal en directo!
                </p>
            </div>
        </div>

        <!-- Formulario -->
        <div class="bg-card border-2 border-brand rounded-lg p-8 glow-effect">
            <form (ngSubmit)="onSubmit()" class="space-y-8">

                <!-- Informaci√≥n Personal -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-primary font-bold mb-3">Nombre *</label>
                        <input type="text" [(ngModel)]="formData.nombre" name="nombre"
                            class="w-full bg-page border-2 border-custom rounded-lg px-4 py-4 text-primary focus:border-brand focus:ring-2 focus:ring-brand outline-none transition-all"
                            [class.border-brand]="isFieldInvalid('nombre')">
                        <div *ngIf="isFieldInvalid('nombre')" class="text-red-400 text-sm mt-1 flex items-center">
                            <i class="ri-error-warning-line mr-1"></i>
                            Este campo es obligatorio
                        </div>
                    </div>
                    <div>
                        <label class="block text-primary font-bold mb-3">Apellidos *</label>
                        <input type="text" [(ngModel)]="formData.apellidos" name="apellidos"
                            class="w-full bg-page border-2 border-custom rounded-lg px-4 py-4 text-primary focus:border-brand focus:ring-2 focus:ring-brand outline-none transition-all"
                            [class.border-brand]="isFieldInvalid('apellidos')">
                        <div *ngIf="isFieldInvalid('apellidos')" class="text-red-400 text-sm mt-1 flex items-center">
                            <i class="ri-error-warning-line mr-1"></i>
                            Este campo es obligatorio
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-primary font-bold mb-3">DNI *</label>
                        <input type="text" [(ngModel)]="formData.dni" name="dni"
                            class="w-full bg-page border-2 border-custom rounded-lg px-4 py-4 text-primary focus:border-brand focus:ring-2 focus:ring-brand outline-none transition-all"
                            [class.border-brand]="isFieldInvalid('dni')">
                        <div *ngIf="isFieldInvalid('dni')" class="text-red-400 text-sm mt-1 flex items-center">
                            <i class="ri-error-warning-line mr-1"></i>
                            Este campo es obligatorio
                        </div>
                    </div>
                    <div>
                        <label class="block text-primary font-bold mb-3">Poblaci√≥n *</label>
                        <input type="text" [(ngModel)]="formData.poblacion" name="poblacion"
                            class="w-full bg-page border-2 border-custom rounded-lg px-4 py-4 text-primary focus:border-brand focus:ring-2 focus:ring-brand outline-none transition-all"
                            [class.border-brand]="isFieldInvalid('poblacion')">
                        <div *ngIf="isFieldInvalid('poblacion')" class="text-red-400 text-sm mt-1 flex items-center">
                            <i class="ri-error-warning-line mr-1"></i>
                            Este campo es obligatorio
                        </div>
                    </div>
                </div>

                <!-- Personas mayores de 12 a√±os -->
                <div class="border-2 border-custom rounded-lg p-6">
                    <h3 class="text-xl font-bold text-brand mb-4">üë• Personas mayores de 12 a√±os</h3>

                    <div class="mb-4">
                        <label class="block text-primary font-bold mb-3">N√∫mero de personas *</label>
                        <input type="number" [(ngModel)]="formData.numMayores" name="numMayores" min="0"
                            class="w-32 bg-page border-2 border-custom rounded-lg px-4 py-2 text-primary focus:border-brand focus:ring-2 focus:ring-brand outline-none transition-all"
                            (change)="calcularTotal()">
                        <div *ngIf="isFieldInvalid('numMayores')" class="text-red-400 text-sm mt-1 flex items-center">
                            <i class="ri-error-warning-line mr-1"></i>
                            Este campo es obligatorio
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4">
                        <div>
                            <label class="block text-primary font-bold mb-2">Plato √önico 1 (10‚Ç¨)</label>
                            <input type="number" [(ngModel)]="formData.mayoresPlato1" name="mayoresPlato1" min="0"
                                class="w-full bg-page border-2 border-custom rounded-lg px-4 py-2 text-primary focus:border-brand focus:ring-2 focus:ring-brand outline-none transition-all"
                                (change)="calcularTotal()">
                        </div>
                        <div>
                            <label class="block text-primary font-bold mb-2">Plato √önico 2 (11‚Ç¨)</label>
                            <input type="number" [(ngModel)]="formData.mayoresPlato2" name="mayoresPlato2" min="0"
                                class="w-full bg-page border-2 border-custom rounded-lg px-4 py-2 text-primary focus:border-brand focus:ring-2 focus:ring-brand outline-none transition-all"
                                (change)="calcularTotal()">
                        </div>
                        <div>
                            <label class="block text-primary font-bold mb-2">Caf√© (2‚Ç¨)</label>
                            <input type="number" [(ngModel)]="formData.mayoresCafe" name="mayoresCafe" min="0"
                                class="w-full bg-page border-2 border-custom rounded-lg px-4 py-2 text-primary focus:border-brand focus:ring-2 focus:ring-brand outline-none transition-all"
                                (change)="calcularTotal()">
                        </div>
                        <div>
                            <label class="block text-primary font-bold mb-2">Bermut (5‚Ç¨)</label>
                            <input type="number" [(ngModel)]="formData.mayoresBermut" name="mayoresBermut" min="0"
                                class="w-full bg-page border-2 border-custom rounded-lg px-4 py-2 text-primary focus:border-brand focus:ring-2 focus:ring-brand outline-none transition-all"
                                (change)="calcularTotal()">
                        </div>
                    </div>
                </div>

                <!-- Personas menores de 12 a√±os -->
                <div class="border-2 border-custom rounded-lg p-6">
                    <h3 class="text-xl font-bold text-brand mb-4">üßí Personas menores de 12 a√±os</h3>

                    <div class="mb-4">
                        <label class="block text-primary font-bold mb-3">N√∫mero de personas *</label>
                        <input type="number" [(ngModel)]="formData.numMenores" name="numMenores" min="0"
                            class="w-32 bg-page border-2 border-custom rounded-lg px-4 py-2 text-primary focus:border-brand focus:ring-2 focus:ring-brand outline-none transition-all"
                            (change)="calcularTotal()">
                        <div *ngIf="isFieldInvalid('numMenores')" class="text-red-400 text-sm mt-1 flex items-center">
                            <i class="ri-error-warning-line mr-1"></i>
                            Este campo es obligatorio
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4">
                        <div>
                            <label class="block text-primary font-bold mb-2">Plato √önico 1 (10‚Ç¨)</label>
                            <input type="number" [(ngModel)]="formData.menoresPlato1" name="menoresPlato1" min="0"
                                class="w-full bg-page border-2 border-custom rounded-lg px-4 py-2 text-primary focus:border-brand focus:ring-2 focus:ring-brand outline-none transition-all"
                                (change)="calcularTotal()">
                        </div>
                        <div>
                            <label class="block text-primary font-bold mb-2">Plato √önico 2 (11‚Ç¨)</label>
                            <input type="number" [(ngModel)]="formData.menoresPlato2" name="menoresPlato2" min="0"
                                class="w-full bg-page border-2 border-custom rounded-lg px-4 py-2 text-primary focus:border-brand focus:ring-2 focus:ring-brand outline-none transition-all"
                                (change)="calcularTotal()">
                        </div>
                    </div>
                </div>

                <!-- Donaci√≥n para asociaci√≥n de ni√±os con c√°ncer -->
                <div class="border-2 border-pink-500 rounded-lg p-6 bg-pink-50/10 mb-6">
                    <label class="flex items-start cursor-pointer group">
                        <input type="checkbox" [ngModel]="formData.donacionCancer" name="donacionCancer"
                            class="mr-4 mt-1 text-pink-500 focus:ring-pink-500 transform scale-125"
                            (ngModelChange)="formData.donacionCancer = $event; calcularTotal()">
                        <div class="flex-1">
                            <div class="flex items-center">
                                <span class="text-2xl mr-3">üéóÔ∏è</span>
                                <span class="text-xl font-bold text-pink-600">A√±adir 2‚Ç¨ de donaci√≥n</span>
                            </div>
                            <p class="text-pink-700 mt-2 text-lg font-medium">
                                Para la asociaci√≥n de ni√±os con c√°ncer
                            </p>
                            <p class="text-pink-600 mt-1 text-sm">
                                Tu contribuci√≥n ayudar√° a apoyar la investigaci√≥n y el tratamiento del c√°ncer infantil
                            </p>
                        </div>
                    </label>
                </div>

                <!-- Total -->
                <div class="bg-brand border-2 border-brand rounded-lg p-6 text-center">
                    <h3 class="text-2xl font-black text-primary mb-2">üí∞ TOTAL A PAGAR</h3>
                    <div class="text-4xl font-black text-primary">{{ total + donacion }} ‚Ç¨</div>
                    <p class="text-primary mt-2">Precio calculado en base a tu selecci√≥n</p>
                </div>

                <!-- Avisos Legales -->
                <div class="space-y-4">
                    <!-- T√©rminos y Condiciones -->
                    <div class="bg-page border-2 border-custom rounded-lg p-6"
                        [class.border-brand]="formSubmitted && !formData.aceptoTerminos">
                        <label class="flex items-start">
                            <input type="checkbox" [(ngModel)]="formData.aceptoTerminos" name="aceptoTerminos"
                                class="mr-4 mt-1 text-brand focus:ring-brand transform scale-125">
                            <span class="text-secondary text-sm leading-relaxed">
                                <strong>Acepto los t√©rminos y condiciones.</strong> Entiendo que esta reserva est√°
                                sujeta
                                a disponibilidad y confirmaci√≥n por parte de la organizaci√≥n. Me comprometo a realizar
                                el
                                pago correspondiente seg√∫n lo seleccionado. La organizaci√≥n se reserva el derecho de
                                modificar fechas o cancelar el evento por causas de fuerza mayor. *
                            </span>
                        </label>
                        <div *ngIf="formSubmitted && !formData.aceptoTerminos"
                            class="text-red-400 text-sm mt-2 flex items-center">
                            <i class="ri-error-warning-line mr-1"></i>
                            Debes aceptar los t√©rminos y condiciones
                        </div>
                    </div>

                    <!-- Pol√≠tica de Privacidad -->
                    <div class="bg-page border-2 border-custom rounded-lg p-6"
                        [class.border-brand]="formSubmitted && !formData.aceptoPoliticaPrivacidad">
                        <label class="flex items-start">
                            <input type="checkbox" [(ngModel)]="formData.aceptoPoliticaPrivacidad"
                                name="aceptoPoliticaPrivacidad"
                                class="mr-4 mt-1 text-brand focus:ring-brand transform scale-125">
                            <span class="text-secondary text-sm leading-relaxed">
                                <strong>He le√≠do y acepto la </strong>
                                <button type="button" (click)="openPoliticaPrivacidad()"
                                    class="text-brand hover-text-brand underline font-semibold transition-colors">
                                    Pol√≠tica de privacidad
                                </button>
                                <strong> y consiento el tratamiento de mis datos para gestionar la reserva de la comida
                                    solidaria.</strong> *
                            </span>
                        </label>
                        <div *ngIf="formSubmitted && !formData.aceptoPoliticaPrivacidad"
                            class="text-red-400 text-sm mt-2 flex items-center">
                            <i class="ri-error-warning-line mr-1"></i>
                            Debes aceptar la pol√≠tica de privacidad
                        </div>
                    </div>

                    <div class="flex flex-col sm:flex-row gap-4 pt-6">
                        <button type="submit" [disabled]="enviando"
                            class="w-full sm:flex-1 btn-brand py-4 sm:py-5 px-6 sm:px-8 rounded-lg text-base sm:text-lg flex items-center justify-center transform hover:scale-105">
                            <span *ngIf="!enviando">
                                <i class="ri-send-plane-line mr-2 sm:mr-3"></i>
                                ENVIAR RESERVA
                            </span>
                            <span *ngIf="enviando">
                                <i class="ri-loader-4-line animate-spin mr-2 sm:mr-3"></i>
                                ENVIANDO...
                            </span>
                        </button>
                        <button type="button" (click)="volverAInicio()"
                            class="w-full sm:flex-1 bg-card hover:bg-custom btn-outline-brand font-bold py-4 sm:py-5 px-6 sm:px-8 rounded-lg transition-all duration-200 text-base sm:text-lg">
                            <i class="ri-arrow-left-line mr-2"></i>
                            Volver al Inicio
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Pol√≠tica de Privacidad -->
    <div *ngIf="showPoliticaPrivacidad"
        class="fixed inset-0 bg-header z-50 flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-page border-2 border-brand rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Header -->
            <div class="bg-brand p-6 sticky top-0 z-10">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-black text-primary">üîí POL√çTICA DE PRIVACIDAD</h2>
                    <button (click)="closePoliticaPrivacidad()"
                        class="text-primary hover:text-secondary text-2xl transition-colors">
                        &times;
                    </button>
                </div>
                <p class="text-primary mt-2">Reserva Comida Solidaria</p>
            </div>

            <!-- Contenido -->
            <div class="p-8 space-y-8">
                <!-- Aqu√≠ puedes poner el mismo contenido de pol√≠tica de privacidad que tienes en el otro formulario -->
                <section>
                    <h3 class="text-xl font-bold text-brand mb-4">1. Finalidad del tratamiento</h3>
                    <div class="bg-card border border-custom rounded-lg p-6">
                        <p class="text-secondary">
                            Los datos personales recabados a trav√©s del formulario de reserva se tratar√°n para gestionar
                            las reservas de la comida solidaria, contactar con los participantes y gestionar los pagos
                            correspondientes.
                        </p>
                    </div>
                </section>

                <!-- M√°s secciones seg√∫n necesites -->

                <div class="flex justify-center pt-6">
                    <button (click)="closePoliticaPrivacidad()" class="btn-brand py-3 px-8 rounded-lg">
                        Cerrar Pol√≠tica de Privacidad
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>